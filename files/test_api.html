<!DOCTYPE html>
<html>
<head>
    <title>API Test</title>
</head>
<body>
    <h1>API Test</h1>
    <div id="results">Loading...</div>
    <script>
        const API_BASE = 'http://localhost:8001/api';

        async function test() {
            const resultsDiv = document.getElementById('results');
            let html = '';

            // Test 1: Health
            try {
                const r1 = await fetch(`${API_BASE}/health`);
                const d1 = await r1.json();
                html += `<p style="color:green">✓ Health: ${d1.status}</p>`;
            } catch(e) {
                html += `<p style="color:red">✗ Health: ${e.message}</p>`;
            }

            // Test 2: Unified Employers
            try {
                const r2 = await fetch(`${API_BASE}/employers/unified/search?limit=2`);
                const d2 = await r2.json();
                html += `<p style="color:green">✓ Unified Employers: ${d2.total} total, got ${d2.employers.length}</p>`;
            } catch(e) {
                html += `<p style="color:red">✗ Unified Employers: ${e.message}</p>`;
            }

            // Test 3: Elections
            try {
                const r3 = await fetch(`${API_BASE}/nlrb/elections/search?limit=2`);
                const d3 = await r3.json();
                html += `<p style="color:green">✓ Elections: ${d3.total} total, got ${d3.elections.length}</p>`;
            } catch(e) {
                html += `<p style="color:red">✗ Elections: ${e.message}</p>`;
            }

            // Test 4: States (main page uses this)
            try {
                const r4 = await fetch(`${API_BASE}/lookups/states`);
                const d4 = await r4.json();
                html += `<p style="color:green">✓ States: ${d4.states.length} states</p>`;
            } catch(e) {
                html += `<p style="color:red">✗ States: ${e.message}</p>`;
            }

            resultsDiv.innerHTML = html;
        }

        test();
    </script>
</body>
</html>
