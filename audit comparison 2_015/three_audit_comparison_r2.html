<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Three-Audit Comparison ‚Äî Round 2</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root {
  --claude-blue: #4A90D9;
  --claude-bg: #EBF3FC;
  --codex-orange: #E8752A;
  --codex-bg: #FEF0E6;
  --summary-green: #2EAE60;
  --summary-bg: #E8F8EF;
  --critical-red: #DC3545;
  --high-yellow: #F0AD4E;
  --medium-blue: #5BC0DE;
  --low-gray: #999;
  --bg: #F7F8FA;
  --surface: #FFFFFF;
  --text: #1A1A2E;
  --text-muted: #6B7280;
  --border: #E5E7EB;
  --sidebar-width: 280px;
  --sidebar-bg: #1A1A2E;
  --sidebar-text: #CBD5E1;
  --sidebar-hover: #334155;
  --sidebar-active: #4A90D9;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'IBM Plex Sans', -apple-system, sans-serif;
  background: var(--bg);
  color: var(--text);
  line-height: 1.7;
  font-size: 15px;
}

/* SIDEBAR */
.sidebar {
  position: fixed;
  top: 0; left: 0;
  width: var(--sidebar-width);
  height: 100vh;
  background: var(--sidebar-bg);
  overflow-y: auto;
  z-index: 100;
  padding: 24px 0;
  transition: transform 0.3s ease;
}
.sidebar-header {
  padding: 0 20px 20px;
  border-bottom: 1px solid rgba(255,255,255,0.1);
  margin-bottom: 16px;
}
.sidebar-header h2 {
  color: #fff;
  font-size: 16px;
  font-weight: 600;
  margin-bottom: 4px;
}
.sidebar-header p {
  color: var(--sidebar-text);
  font-size: 12px;
}
.sidebar nav a {
  display: block;
  padding: 8px 20px;
  color: var(--sidebar-text);
  text-decoration: none;
  font-size: 13px;
  border-left: 3px solid transparent;
  transition: all 0.15s;
}
.sidebar nav a:hover {
  background: var(--sidebar-hover);
  color: #fff;
}
.sidebar nav a.active {
  border-left-color: var(--sidebar-active);
  color: #fff;
  background: rgba(74,144,217,0.12);
}
.sidebar nav .nav-group {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 1.2px;
  color: rgba(255,255,255,0.35);
  padding: 16px 20px 6px;
  font-weight: 600;
}

/* MAIN CONTENT */
.main {
  margin-left: var(--sidebar-width);
  padding: 40px 48px 80px;
  max-width: 960px;
}

/* MOBILE TOGGLE */
.sidebar-toggle {
  display: none;
  position: fixed;
  top: 16px; left: 16px;
  z-index: 200;
  background: var(--sidebar-bg);
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 10px 14px;
  font-size: 18px;
  cursor: pointer;
}

/* HEADINGS */
h1 {
  font-size: 28px;
  font-weight: 700;
  margin-bottom: 8px;
  color: var(--text);
}
.subtitle {
  color: var(--text-muted);
  font-size: 15px;
  margin-bottom: 32px;
}
h2 {
  font-size: 22px;
  font-weight: 700;
  margin-top: 48px;
  margin-bottom: 16px;
  padding-bottom: 8px;
  border-bottom: 2px solid var(--border);
  scroll-margin-top: 24px;
}
h3 {
  font-size: 17px;
  font-weight: 600;
  margin-top: 28px;
  margin-bottom: 10px;
  scroll-margin-top: 24px;
}
h4 {
  font-size: 15px;
  font-weight: 600;
  margin-top: 20px;
  margin-bottom: 8px;
}

p { margin-bottom: 14px; }

/* BADGES */
.badge {
  display: inline-block;
  padding: 2px 10px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
  letter-spacing: 0.3px;
  vertical-align: middle;
}
.badge-claude { background: var(--claude-bg); color: var(--claude-blue); }
.badge-codex { background: var(--codex-bg); color: var(--codex-orange); }
.badge-summary { background: var(--summary-bg); color: var(--summary-green); }
.badge-critical { background: #FDE8E8; color: var(--critical-red); }
.badge-high { background: #FEF3E2; color: #B8860B; }
.badge-medium { background: #E8F4FD; color: #1A7AAF; }
.badge-low { background: #F3F4F6; color: var(--low-gray); }

.severity {
  display: inline-block;
  padding: 3px 12px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: 700;
  letter-spacing: 0.5px;
  text-transform: uppercase;
}
.sev-critical { background: var(--critical-red); color: #fff; }
.sev-high { background: var(--high-yellow); color: #fff; }
.sev-medium { background: var(--medium-blue); color: #fff; }
.sev-low { background: #E5E7EB; color: #666; }

/* TABLES */
table {
  width: 100%;
  border-collapse: collapse;
  margin: 16px 0 24px;
  font-size: 13px;
}
th {
  background: #F1F5F9;
  font-weight: 600;
  text-align: left;
  padding: 10px 12px;
  border-bottom: 2px solid var(--border);
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
}
td {
  padding: 10px 12px;
  border-bottom: 1px solid var(--border);
  vertical-align: top;
}
tr:hover td { background: #FAFBFC; }

/* CARDS */
.card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 20px 24px;
  margin: 16px 0;
  box-shadow: 0 1px 3px rgba(0,0,0,0.04);
}
.card-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 12px;
}
.card h4 { margin: 0; }

/* HIGHLIGHT BOX */
.highlight-box {
  border-left: 4px solid var(--claude-blue);
  background: var(--claude-bg);
  padding: 16px 20px;
  border-radius: 0 8px 8px 0;
  margin: 16px 0;
}
.highlight-box.green {
  border-left-color: var(--summary-green);
  background: var(--summary-bg);
}
.highlight-box.orange {
  border-left-color: var(--codex-orange);
  background: var(--codex-bg);
}
.highlight-box.red {
  border-left-color: var(--critical-red);
  background: #FDE8E8;
}

/* GLOSSARY */
.glossary-term {
  font-weight: 600;
  color: var(--claude-blue);
}

/* TAKEAWAY BOX */
.takeaway {
  background: linear-gradient(135deg, #1A1A2E, #2D2D5E);
  color: #fff;
  border-radius: 12px;
  padding: 28px 32px;
  margin: 24px 0;
}
.takeaway h3 { color: #fff; margin-top: 0; }
.takeaway ol { padding-left: 20px; }
.takeaway li { margin-bottom: 10px; line-height: 1.6; }

/* ACTION DAY */
.day-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 20px 24px;
  margin: 12px 0;
}
.day-label {
  display: inline-block;
  background: var(--sidebar-bg);
  color: #fff;
  font-size: 12px;
  font-weight: 700;
  padding: 4px 12px;
  border-radius: 6px;
  margin-bottom: 10px;
}

/* PRIORITY SECTION */
.priority-item {
  padding: 14px 0;
  border-bottom: 1px solid var(--border);
}
.priority-item:last-child { border-bottom: none; }
.priority-id {
  font-family: 'IBM Plex Mono', monospace;
  font-weight: 600;
  font-size: 13px;
  margin-right: 8px;
}

/* AGREEMENT INDICATORS */
.agree-yes { color: var(--summary-green); font-weight: 600; }
.agree-no { color: var(--critical-red); font-weight: 600; }
.agree-partial { color: var(--high-yellow); font-weight: 600; }

/* COMPARISON ROW */
.auditor-row {
  display: flex;
  gap: 12px;
  margin: 12px 0;
}
.auditor-col {
  flex: 1;
  padding: 12px 16px;
  border-radius: 8px;
  font-size: 13px;
}
.auditor-col.claude-col { background: var(--claude-bg); border-left: 3px solid var(--claude-blue); }
.auditor-col.codex-col { background: var(--codex-bg); border-left: 3px solid var(--codex-orange); }
.auditor-col.summary-col { background: var(--summary-bg); border-left: 3px solid var(--summary-green); }
.auditor-label {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 4px;
}

/* PRINT */
@media print {
  .sidebar, .sidebar-toggle { display: none !important; }
  .main { margin-left: 0; padding: 20px; max-width: 100%; }
  .card { box-shadow: none; border: 1px solid #ccc; page-break-inside: avoid; }
  .takeaway { color: #000; background: #f0f0f0; }
  h2 { page-break-before: always; }
  h2:first-of-type { page-break-before: avoid; }
}

/* MOBILE */
@media (max-width: 768px) {
  .sidebar { transform: translateX(-100%); }
  .sidebar.open { transform: translateX(0); }
  .sidebar-toggle { display: block; }
  .main { margin-left: 0; padding: 20px 16px; }
  .auditor-row { flex-direction: column; }
  table { font-size: 12px; }
  th, td { padding: 6px 8px; }
}
</style>
</head>
<body>

<button class="sidebar-toggle" onclick="document.querySelector('.sidebar').classList.toggle('open')">‚ò∞</button>

<aside class="sidebar">
  <div class="sidebar-header">
    <h2>Audit Comparison</h2>
    <p>Round 2 ‚Äî Feb 15, 2026</p>
  </div>
  <nav>
    <div class="nav-group">Overview</div>
    <a href="#part1">1. How to Read This</a>
    <a href="#part2">2. Numbers at a Glance</a>
    <div class="nav-group">Findings</div>
    <a href="#part3">3. All Three Agree</a>
    <a href="#part4">4. Two of Three Agree</a>
    <a href="#part5">5. Where They Disagree</a>
    <a href="#part6">6. Unique Catches</a>
    <div class="nav-group">History</div>
    <a href="#part7">7. Round 1 Resolution</a>
    <a href="#part8">8. Delta Since Round 1</a>
    <div class="nav-group">Action</div>
    <a href="#part9">9. Methodology</a>
    <a href="#part10">10. Priority List</a>
    <a href="#part11">11. One-Week Plan</a>
    <div class="nav-group">Summary</div>
    <a href="#part12">12. What's Working Well</a>
    <a href="#part13">13. Key Takeaways</a>
  </nav>
</aside>

<main class="main">

<h1>Three-Audit Comparison Report ‚Äî Round 2</h1>
<p class="subtitle">Labor Relations Research Platform &bull; Comparing <span class="badge badge-claude">Claude</span> <span class="badge badge-codex">Codex</span> <span class="badge badge-summary">Summary</span></p>

<!-- ============ PART 2: NUMBERS ============ -->
<h2 id="part2">Part 2: Numbers at a Glance</h2>

<table>
<thead>
<tr><th>Metric</th><th><span class="badge badge-claude">Claude</span></th><th><span class="badge badge-codex">Codex</span></th><th><span class="badge badge-summary">Summary</span></th><th>Agreement</th></tr>
</thead>
<tbody>
<tr><td>Total tables</td><td>160</td><td>169</td><td>160</td><td class="agree-partial">‚ö†Ô∏è Partial</td></tr>
<tr><td>Total views</td><td>186</td><td>186</td><td>186</td><td class="agree-yes">‚úÖ Yes</td></tr>
<tr><td>Materialized views</td><td>4</td><td>4</td><td>‚Äî</td><td class="agree-yes">‚úÖ Yes</td></tr>
<tr><td>Database size</td><td>~20 GB</td><td>20 GB</td><td>7.52 GB</td><td class="agree-no">‚ùå No</td></tr>
<tr><td>Total rows</td><td>~23.9M</td><td>~76.7M</td><td>‚Äî</td><td class="agree-no">‚ùå No</td></tr>
<tr><td>F7‚ÜíOSHA match rate</td><td>47.3% (current)</td><td>25.37% (all)</td><td>25.37%</td><td class="agree-partial">‚ö†Ô∏è See note</td></tr>
<tr><td>F7‚ÜíNLRB match rate</td><td>28.7% (current)</td><td>4.88% (all)</td><td>4.88%</td><td class="agree-partial">‚ö†Ô∏è See note</td></tr>
<tr><td>NLRB orphans</td><td>Not flagged</td><td>1,760,408 (92.3%)</td><td>1,760,408 (92.3%)</td><td class="agree-partial">‚ö†Ô∏è Partial</td></tr>
<tr><td>Union file orphans</td><td>824</td><td>824</td><td>824</td><td class="agree-yes">‚úÖ Yes</td></tr>
<tr><td>Employer orphans</td><td>0</td><td>0</td><td>‚Äî</td><td class="agree-yes">‚úÖ Yes</td></tr>
<tr><td>API endpoints</td><td>152</td><td>152</td><td>‚Äî</td><td class="agree-yes">‚úÖ Yes</td></tr>
<tr><td>Broken endpoints</td><td>0</td><td>3</td><td>‚Äî</td><td class="agree-no">‚ùå No</td></tr>
<tr><td>Security issues</td><td>1 (auth)</td><td>2 (auth + density)</td><td>1 (auth)</td><td class="agree-partial">‚ö†Ô∏è Partial</td></tr>
</tbody>
</table>

<div class="highlight-box">
<strong>Why the match rates differ:</strong> Claude used only "current" employers (60,953) as the denominator ‚Äî the employers actively in F-7 filings. Codex used ALL employers (113,713), including 52,760 historical ones. The raw match counts are nearly identical. For organizer work, Claude's number is more useful. For data auditing, Codex's is more thorough.
</div>

<div class="highlight-box orange">
<strong>Why table counts differ:</strong> Codex discovered 9 large tables in a separate <code>gleif</code> schema (~12 GB) that the other auditors didn't scan. Both counts are technically correct within their scope.
</div>

<!-- ============ PART 1: HOW TO READ ============ -->
<h2 id="part1">Part 1: How to Read This Document</h2>

<p>This document compares three independent audits of the same platform ‚Äî like getting three home inspectors who never spoke to each other. Where they all agree, you can be very confident the finding is real. Where only one caught something, it needs verification.</p>

<div class="card">
<h4>Confidence Levels</h4>
<p><strong>All three agree</strong> = Very high confidence. Act on it.<br>
<strong>Two out of three</strong> = High confidence. Probably real.<br>
<strong>Only one found it</strong> = Interesting but verify.</p>
</div>

<div class="card">
<h4>Glossary</h4>
<p><span class="glossary-term">Orphaned records:</span> Data rows pointing to something that doesn't exist ‚Äî like a contact with a disconnected phone number.</p>
<p><span class="glossary-term">Match rate:</span> Percentage of records from one database that link to another. Higher = more connected data.</p>
<p><span class="glossary-term">CORS:</span> Security rule controlling which websites can talk to the backend. Like a bouncer at the door.</p>
<p><span class="glossary-term">Materialized view (MV):</span> A pre-computed summary the database stores to avoid recalculating. Like a printed monthly total instead of re-adding receipts.</p>
<p><span class="glossary-term">JWT:</span> A digital login token. The system has one built but it's turned off.</p>
<p><span class="glossary-term">Fail-open:</span> When security defaults to "let everyone in" ‚Äî dangerous for production.</p>
<p><span class="glossary-term">NAICS codes:</span> Government industry classification codes (retail, healthcare, etc.).</p>
<p><span class="glossary-term">ANALYZE:</span> Database maintenance that helps it make smarter query decisions. Like updating a library's card catalog.</p>
<p><span class="glossary-term">Smoke test:</span> Quick test ‚Äî "does the page load at all?"</p>
<p><span class="glossary-term">Scorecard:</span> The platform's 9-factor rating for organizing targets.</p>
</div>

<!-- ============ PART 3: ALL THREE AGREE ============ -->
<h2 id="part3">Part 3: Where All Three Agree</h2>
<p>These findings have the highest confidence ‚Äî every independent auditor flagged them.</p>

<div class="card">
<div class="card-header">
  <span class="severity sev-critical">CRITICAL</span>
  <h4>3.1 Authentication Is Disabled by Default</h4>
</div>
<p>The platform has a full login system built, but it's turned off. Anyone who can reach the website sees everything ‚Äî all data, all admin controls. Like building a lock but leaving the door wide open.</p>
<div class="auditor-row">
  <div class="auditor-col claude-col"><div class="auditor-label">Claude</div>Called it HIGH. Fine for local dev, dangerous for deployment. Identified the exact bypass line.</div>
  <div class="auditor-col codex-col"><div class="auditor-label">Codex</div>Called it CRITICAL. Confirmed with runtime logs. Found the same code.</div>
  <div class="auditor-col summary-col"><div class="auditor-label">Summary</div>Called it CRITICAL. Confirmed still broken from Round 1.</div>
</div>
<div class="highlight-box red"><strong>Action:</strong> Set <code>LABOR_JWT_SECRET</code>, bootstrap admin user, test login. <strong>Effort:</strong> 1-2 hours.</div>
</div>

<div class="card">
<div class="card-header">
  <span class="severity sev-high">HIGH</span>
  <h4>3.2 Union File Number Orphans Worsened (824, up from 195)</h4>
</div>
<p>824 connections between employers and unions point to union records that don't exist. These employer-union relationships are invisible to anyone using the platform.</p>
<div class="auditor-row">
  <div class="auditor-col claude-col"><div class="auditor-label">Claude</div>824 orphans, HIGH severity. Worsened due to historical employer import.</div>
  <div class="auditor-col codex-col"><div class="auditor-label">Codex</div>824 orphans confirmed. MEDIUM severity but noted worsening.</div>
  <div class="auditor-col summary-col"><div class="auditor-label">Summary</div>824 orphans, 0.69% rate. Called CRITICAL.</div>
</div>
<div class="highlight-box"><strong>Action:</strong> Investigate whether these are historical unions to add or broken references to clean. <strong>Effort:</strong> 4-8 hours.</div>
</div>

<div class="card">
<div class="card-header">
  <span class="severity sev-medium">MEDIUM</span>
  <h4>3.3 Documentation Significantly Out of Date</h4>
</div>
<p>README.md lists features that don't exist, shows wrong numbers, and misses 10+ major capabilities. Claude found it's only 55% accurate.</p>
<div class="highlight-box"><strong>Action:</strong> Rewrite README with actual endpoints (152), 9-factor scorecard, current data counts. <strong>Effort:</strong> 2-4 hours.</div>
</div>

<div class="card" style="border-left: 4px solid var(--summary-green);">
<div class="card-header">
  <span style="background: var(--summary-bg); color: var(--summary-green);" class="severity">‚úÖ ALL FIXED</span>
  <h4>Positive Consensus</h4>
</div>
<p>All three confirmed: <strong>Password removed from code ‚úÖ</strong> &bull; <strong>CORS locked down ‚úÖ</strong> &bull; <strong>Frontend split into 12 files ‚úÖ</strong> &bull; <strong>60,000 employer orphans ‚Üí 0 ‚úÖ</strong></p>
</div>

<!-- ============ PART 4: TWO OF THREE ============ -->
<h2 id="part4">Part 4: Where Two Out of Three Agree</h2>

<div class="card">
<div class="card-header">
  <span class="severity sev-critical">CRITICAL</span>
  <h4>4.1 NLRB Participant Orphan Rate Is 92.34%</h4>
  <span class="badge badge-codex">Codex</span> <span class="badge badge-summary">Summary</span>
</div>
<p>1.76 million out of 1.9 million participant records can't link to any election record. Claude didn't flag this ‚Äî likely because the participants table intentionally covers ALL NLRB case types, not just elections. It looks catastrophic but is partly structural.</p>
<div class="highlight-box"><strong>Action:</strong> Create a unified NLRB view bridging participants to elections through case numbers. <strong>Effort:</strong> 6-12 hours.</div>
</div>

<div class="card">
<div class="card-header">
  <span class="severity sev-medium">MEDIUM</span>
  <h4>4.2 Stale Database Statistics (150-170 tables never analyzed)</h4>
  <span class="badge badge-claude">Claude</span> <span class="badge badge-codex">Codex</span>
</div>
<p>The database is guessing about the best way to retrieve data instead of knowing. Like a library with an outdated card catalog. The fix takes 2 minutes.</p>
<div class="highlight-box green"><strong>Action:</strong> Run <code>ANALYZE</code> on the full database. <strong>Effort:</strong> 2 minutes. Immediate performance improvement.</div>
</div>

<!-- ============ PART 5: DISAGREE ============ -->
<h2 id="part5">Part 5: Where They Disagree</h2>

<div class="card">
<h4>5.1 OSHA Match Rate: 47.3% vs 25.37%</h4>
<div class="auditor-row">
  <div class="auditor-col claude-col"><div class="auditor-label">Claude</div>28,836 / 60,953 current = <strong>47.3%</strong></div>
  <div class="auditor-col codex-col"><div class="auditor-label">Codex</div>28,848 / 113,713 all = <strong>25.37%</strong></div>
</div>
<p><strong>Verdict:</strong> Both correct ‚Äî different denominators. Raw match counts are identical. For organizer work, use 47.3% (current employers). For auditing, use 25.37% (all employers).</p>
</div>

<div class="card">
<h4>5.2 WHD Matching: Fixed or Broken?</h4>
<div class="auditor-row">
  <div class="auditor-col claude-col"><div class="auditor-label">Claude</div>FIXED ‚Äî F7-to-WHD at <strong>16.0%</strong> (from 2%)</div>
  <div class="auditor-col codex-col"><div class="auditor-label">Codex</div>STILL BROKEN ‚Äî Mergent-to-WHD at <strong>2.47%</strong></div>
</div>
<p><strong>Verdict:</strong> Different pathways measured. The F7 pathway (what organizers use) improved dramatically. The Mergent pathway didn't. Mark as <strong>IMPROVED</strong>.</p>
</div>

<div class="card">
<h4>5.3 990 Data: Fixed or Broken?</h4>
<div class="auditor-row">
  <div class="auditor-col claude-col"><div class="auditor-label">Claude</div>FIXED ‚Äî 14,059 matches via dedicated table</div>
  <div class="auditor-col codex-col"><div class="auditor-label">Codex</div>STILL BROKEN ‚Äî only 69 Mergent-990 matches</div>
</div>
<p><strong>Verdict:</strong> Claude checked the correct table (<code>employer_990_matches</code>). Codex checked a vestigial Mergent column. <strong>990 matching IS working.</strong></p>
</div>

<div class="card">
<h4>5.4 Scoring: Unified or Still Dual?</h4>
<div class="auditor-row">
  <div class="auditor-col claude-col"><div class="auditor-label">Claude</div>FIXED ‚Äî unified 9-factor MV scorecard</div>
  <div class="auditor-col codex-col"><div class="auditor-label">Codex</div>STILL BROKEN ‚Äî frontend has dual score remnants</div>
</div>
<p><strong>Verdict:</strong> Backend IS unified. Frontend has old code remnants. <strong>Architecture is fixed; cleanup needed.</strong></p>
</div>

<!-- ============ PART 6: UNIQUE ============ -->
<h2 id="part6">Part 6: Unique Catches</h2>

<h3>Only <span class="badge badge-claude">Claude</span> Found</h3>

<div class="card">
<div class="card-header"><span class="severity sev-high">HIGH</span><h4>29 Scripts With Literal-String Password Bug</h4></div>
<p>29 scripts have a subtle Python quoting error that sends the literal text <code>os.environ.get('DB_PASSWORD', '')</code> as the password instead of evaluating it. They only work because the database doesn't require a password. They'll all break when auth is enabled.</p>
</div>

<div class="card">
<div class="card-header"><span class="severity sev-medium">MEDIUM</span><h4>299 Unused Indexes (1.67 GB wasted)</h4></div>
<p>Database has 299 indexes that nothing reads, wasting storage and slowing every write.</p>
</div>

<div class="card">
<div class="card-header"><span class="severity sev-medium">MEDIUM</span><h4>NAICS Coverage Only 37.7% for Current Employers</h4></div>
<p>62% of employers can't get industry-based scoring. Can be backfilled from OSHA data (71.8% coverage).</p>
</div>

<h3>Only <span class="badge badge-codex">Codex</span> Found</h3>

<div class="card">
<div class="card-header"><span class="severity sev-critical">CRITICAL</span><h4>3 Density Endpoints Return Error 500</h4></div>
<p>Three key geographic analysis pages crash when used. Bug is a mismatch between tuple-style and dictionary-style database result access. Only caught because Codex actually tested the live API.</p>
</div>

<div class="card">
<div class="card-header"><span class="severity sev-high">HIGH</span><h4>GLEIF Raw Schema Still 12 GB</h4></div>
<p>A separate <code>gleif</code> schema with 9 tables totaling ~12 GB wasn't seen by other auditors who only checked <code>public</code>. Could cut database nearly in half if archived.</p>
</div>

<div class="card">
<div class="card-header"><span class="severity sev-high">HIGH</span><h4>Dead Script References to Dropped Tables</h4></div>
<p>4 scripts reference tables that no longer exist (<code>splink_match_results</code>, <code>corporate_ultimate_parents</code>, etc.). Would crash if run.</p>
</div>

<!-- ============ PART 7: ROUND 1 RESOLUTION ============ -->
<h2 id="part7">Part 7: Round 1 Issue Resolution</h2>

<table>
<thead>
<tr><th>#</th><th>Round 1 Issue</th><th><span class="badge badge-claude">Claude</span></th><th><span class="badge badge-codex">Codex</span></th><th><span class="badge badge-summary">Summary</span></th><th>Consensus</th></tr>
</thead>
<tbody>
<tr><td>1</td><td>Password in code</td><td>‚úÖ FIXED</td><td>‚úÖ FIXED</td><td>‚úÖ FIXED</td><td class="agree-yes">FIXED ‚úÖ</td></tr>
<tr><td>2</td><td>Auth disabled</td><td>‚ö†Ô∏è Partial</td><td>‚ùå Broken</td><td>‚ùå Broken</td><td class="agree-no">Still broken</td></tr>
<tr><td>3</td><td>CORS wide open</td><td>‚úÖ FIXED</td><td>‚úÖ FIXED</td><td>‚ö†Ô∏è Needs hardening</td><td class="agree-yes">FIXED ‚úÖ</td></tr>
<tr><td>4</td><td>50% employer orphans</td><td>‚úÖ FIXED</td><td>‚úÖ FIXED</td><td>‚úÖ FIXED</td><td class="agree-yes">FIXED ‚úÖ‚úÖ‚úÖ</td></tr>
<tr><td>5</td><td>Frontend monolith</td><td>‚úÖ FIXED</td><td>‚úÖ FIXED</td><td>‚úÖ FIXED</td><td class="agree-yes">FIXED ‚úÖ‚úÖ‚úÖ</td></tr>
<tr><td>6</td><td>OSHA match ~14%</td><td>‚úÖ 47.3%</td><td>‚ùå 25.37%</td><td>‚úÖ 25.37%</td><td class="agree-partial">Improved</td></tr>
<tr><td>7</td><td>WHD match ~2%</td><td>‚úÖ 16.0%</td><td>‚ùå 2.47%</td><td>‚ùå Still low</td><td class="agree-partial">Improved</td></tr>
<tr><td>8</td><td>No matching tests</td><td>‚úÖ 165 tests</td><td>‚úÖ Tests exist</td><td>‚ö†Ô∏è Partial</td><td class="agree-yes">FIXED ‚úÖ</td></tr>
<tr><td>9</td><td>README wrong startup</td><td>‚úÖ FIXED</td><td>‚úÖ FIXED</td><td>‚úÖ FIXED</td><td class="agree-yes">FIXED ‚úÖ</td></tr>
<tr><td>10</td><td>990 unmatched</td><td>‚úÖ 14K matches</td><td>‚ùå 69 Mergent</td><td>‚úÖ FIXED</td><td class="agree-partial">FIXED via dedicated table</td></tr>
<tr><td>11</td><td>GLEIF 10+ GB</td><td>‚ö†Ô∏è 396 MB public</td><td>‚ö†Ô∏è 12 GB gleif schema</td><td>‚úÖ FIXED</td><td class="agree-partial">Partially fixed</td></tr>
<tr><td>12</td><td>Silent LIMIT 500</td><td>‚úÖ FIXED</td><td>‚ö†Ô∏è Partial</td><td>‚úÖ FIXED</td><td class="agree-yes">Mostly fixed</td></tr>
<tr><td>13</td><td>Two scoring systems</td><td>‚úÖ Unified MV</td><td>‚ùå Frontend dual</td><td>‚úÖ FIXED</td><td class="agree-partial">Backend fixed</td></tr>
<tr><td>14</td><td>195 union orphans</td><td>‚ùå 824</td><td>‚ùå 824</td><td>‚ùå 824</td><td class="agree-no">Worsened ‚ùå‚ùå‚ùå</td></tr>
<tr><td>15</td><td>Stale pg_stat</td><td>‚ö†Ô∏è Partial</td><td>‚ùå Broken</td><td>‚ö†Ô∏è Partial</td><td class="agree-partial">Partially fixed</td></tr>
</tbody>
</table>

<div class="highlight-box green">
<strong>Scorecard:</strong> 6 clearly FIXED &bull; 4 IMPROVED &bull; 3 partially fixed &bull; 2 still broken. The platform is trending in the right direction.
</div>

<!-- ============ PART 8: DELTA ============ -->
<h2 id="part8">Part 8: Delta Since Round 1</h2>

<div class="card">
<h4>Added</h4>
<p>52,760 historical employers (orphan fix) &bull; Materialized view scorecard (9-factor) &bull; JWT auth system &bull; Data freshness tracking &bull; ULP integration &bull; 118 new tests &bull; Frontend split to 12 files</p>
<h4>Removed</h4>
<p>splink_match_results (5.7M rows, 1.6 GB) &bull; 6 empty staging tables &bull; 71 unused indexes</p>
<h4>Size</h4>
<p>22 GB ‚Üí 20 GB (net reduction). GLEIF public: 10+ GB ‚Üí 396 MB. But GLEIF raw schema still ~12 GB.</p>
<h4>New Problems</h4>
<p>Union orphans worsened (195 ‚Üí 824) &bull; modals.js secondary monolith (2,598 lines)</p>
</div>

<!-- ============ PART 9: METHODOLOGY ============ -->
<h2 id="part9">Part 9: Methodology Comparison</h2>

<table>
<thead><tr><th>Aspect</th><th><span class="badge badge-claude">Claude</span></th><th><span class="badge badge-codex">Codex</span></th><th><span class="badge badge-summary">Summary</span></th></tr></thead>
<tbody>
<tr><td>Database access</td><td>Direct SQL via Claude Code</td><td>Python scripts, JSON artifacts</td><td>Appears live queries</td></tr>
<tr><td>Live API testing</td><td>Code review only</td><td>Smoke tests on 46 endpoints</td><td>Code review only</td></tr>
<tr><td>Schema scope</td><td>Public only</td><td>All schemas</td><td>Public only</td></tr>
<tr><td>Match rate denominator</td><td>Current employers (60,953)</td><td>All employers (113,713)</td><td>All employers</td></tr>
<tr><td>Strengths</td><td>Deepest data analysis, best organizer perspective, most practical fixes</td><td>Only one who tested live API, broadest scope, best reproducibility</td><td>Concise overview, good Round 1 tracking</td></tr>
<tr><td>Blind spots</td><td>Missed GLEIF raw schema, no smoke tests</td><td>Wrong columns for some checks, too strict on "broken" calls</td><td>Least detailed, fewer unique findings</td></tr>
</tbody>
</table>

<!-- ============ PART 10: PRIORITY LIST ============ -->
<h2 id="part10">Part 10: Unified Priority List</h2>

<h3>üî¥ CRITICAL ‚Äî Do These First</h3>

<div class="priority-item">
<span class="priority-id">C1</span> <span class="severity sev-critical">CRITICAL</span> <strong>Fix 3 crashing density endpoints</strong> <span class="badge badge-codex">Codex</span><br>
Geographic targeting pages are completely broken. Change tuple indexing to dictionary keys in density.py. <strong>Effort: 2-4 hours.</strong>
</div>

<div class="priority-item">
<span class="priority-id">C2</span> <span class="severity sev-critical">CRITICAL</span> <strong>Enable authentication</strong> <span class="badge badge-claude">Claude</span> <span class="badge badge-codex">Codex</span> <span class="badge badge-summary">Summary</span><br>
All data publicly accessible. Set JWT secret, create admin user, test login. <strong>Effort: 1-2 hours.</strong>
</div>

<div class="priority-item">
<span class="priority-id">C3</span> <span class="severity sev-critical">CRITICAL</span> <strong>Resolve NLRB participant linkage</strong> <span class="badge badge-codex">Codex</span> <span class="badge badge-summary">Summary</span><br>
92% of participant records unlinked to elections. Create unified NLRB view. <strong>Effort: 6-12 hours.</strong>
</div>

<h3>üü° HIGH ‚Äî Do Before Others Use It</h3>

<div class="priority-item">
<span class="priority-id">H1</span> <strong>Fix 29 literal-string password scripts</strong> <span class="badge badge-claude">Claude</span> ‚Äî <strong>4-8 hours</strong>
</div>
<div class="priority-item">
<span class="priority-id">H2</span> <strong>Resolve 824 union orphans</strong> <span class="badge badge-claude">Claude</span> <span class="badge badge-codex">Codex</span> <span class="badge badge-summary">Summary</span> ‚Äî <strong>4-8 hours</strong>
</div>
<div class="priority-item">
<span class="priority-id">H3</span> <strong>Update README.md</strong> <span class="badge badge-claude">Claude</span> <span class="badge badge-codex">Codex</span> <span class="badge badge-summary">Summary</span> ‚Äî <strong>2-4 hours</strong>
</div>
<div class="priority-item">
<span class="priority-id">H4</span> <strong>Evaluate 12 GB GLEIF raw schema</strong> <span class="badge badge-codex">Codex</span> ‚Äî <strong>4-12 hours</strong>
</div>
<div class="priority-item">
<span class="priority-id">H5</span> <strong>Backfill NAICS from OSHA</strong> <span class="badge badge-claude">Claude</span> ‚Äî <strong>2-4 hours</strong>
</div>

<h3>üîµ MEDIUM ‚Äî Should Fix But Not Urgent</h3>

<div class="priority-item">
<span class="priority-id">M1</span> Run ANALYZE on full database ‚Äî <strong>2 minutes</strong><br>
<span class="priority-id">M2</span> Migrate scripts to shared db_config ‚Äî <strong>Ongoing</strong><br>
<span class="priority-id">M3</span> Remove 299 unused indexes ‚Äî <strong>Save 1.67 GB</strong><br>
<span class="priority-id">M4</span> Clean up dual-score frontend remnants ‚Äî <strong>1-2 hours</strong><br>
<span class="priority-id">M5</span> Set up automated MV refresh scheduling ‚Äî <strong>4-8 hours</strong><br>
<span class="priority-id">M6</span> Create production deployment checklist ‚Äî <strong>2-4 hours</strong><br>
<span class="priority-id">M7</span> Split modals.js ‚Äî <strong>2-4 hours</strong><br>
<span class="priority-id">M8</span> Standardize f-string SQL patterns ‚Äî <strong>4-8 hours</strong>
</div>

<!-- ============ PART 11: WEEK PLAN ============ -->
<h2 id="part11">Part 11: One-Week Action Plan</h2>

<div class="day-card">
<span class="day-label">Day 1</span>
<h4>Fix What's Broken Right Now</h4>
<p><strong>Morning:</strong> Fix 3 density endpoint crashes (C1). Run ANALYZE (M1). Refresh mv_employer_search.<br>
<strong>Afternoon:</strong> Enable authentication ‚Äî set JWT secret, create admin, test (C2).</p>
<p><em>Addresses: C1, C2, M1</em></p>
</div>

<div class="day-card">
<span class="day-label">Day 2</span>
<h4>Data Integrity Cleanup</h4>
<p><strong>Morning:</strong> Investigate and fix 824 union file number orphans (H2).<br>
<strong>Afternoon:</strong> Backfill NAICS codes from OSHA matches (H5). Refresh scorecard.</p>
<p><em>Addresses: H2, H5</em></p>
</div>

<div class="day-card">
<span class="day-label">Day 3</span>
<h4>NLRB Linkage + GLEIF Evaluation</h4>
<p><strong>Morning:</strong> Build unified NLRB view bridging participants to elections (C3).<br>
<strong>Afternoon:</strong> Evaluate 12 GB GLEIF raw schema ‚Äî archive if unused (H4).</p>
<p><em>Addresses: C3, H4</em></p>
</div>

<div class="day-card">
<span class="day-label">Day 4</span>
<h4>Code Cleanup + Documentation</h4>
<p><strong>Morning:</strong> Fix 29 literal-string password scripts (H1). Clean up frontend score remnants (M4).<br>
<strong>Afternoon:</strong> Rewrite README.md (H3). Update CLAUDE.md. Add deployment checklist (M6).</p>
<p><em>Addresses: H1, M4, H3, M6</em></p>
</div>

<div class="day-card">
<span class="day-label">Day 5</span>
<h4>Automation + Future-Proofing</h4>
<p><strong>Morning:</strong> Set up automated MV refresh scheduling (M5). Begin script migration (M2).<br>
<strong>Afternoon:</strong> Start removing unused indexes (M3). Create "blessed pipeline" manifest. Full end-to-end test.</p>
<p><em>Addresses: M5, M2, M3</em></p>
</div>

<!-- ============ PART 12: WORKING WELL ============ -->
<h2 id="part12">Part 12: What's Working Well</h2>

<div class="card" style="border-left: 4px solid var(--summary-green);">
<h4>Triple-Praised Highlights</h4>
<p>üèÜ <strong>60,000-orphan fix</strong> ‚Äî from critical crisis to zero. All three called this remarkable.<br>
üèÜ <strong>Materialized view scorecard</strong> ‚Äî 9-factor, SQL-computed, zero-downtime refresh.<br>
üèÜ <strong>Frontend decomposition</strong> ‚Äî 10,500 lines ‚Üí 12 focused files, no hardcoded URLs.<br>
üèÜ <strong>Match rates dramatically improved</strong> ‚Äî OSHA 3x, WHD 8x, 990 from zero.<br>
üèÜ <strong>Security posture improved</strong> ‚Äî password gone, CORS locked, zero injection risk.<br>
üèÜ <strong>165 automated tests</strong> ‚Äî up from ~47, covering matching, scoring, API, auth, and data integrity.</p>
</div>

<!-- ============ PART 13: TAKEAWAYS ============ -->
<h2 id="part13">Part 13: Key Takeaways</h2>

<div class="takeaway">
<h3>If You Read Nothing Else</h3>
<ol>
<li><strong>Enormous progress in 48 hours.</strong> The #1 crisis (60K orphans) is resolved. Match rates doubled or tripled. Tests 47‚Üí165. Frontend professionally split.</li>
<li><strong>Three pages are broken right now.</strong> Density endpoints crash. Fix takes 2-4 hours. Only Codex found this because only Codex tested the live API.</li>
<li><strong>Enable auth before anyone else uses this.</strong> All three agree ‚Äî the system is wide open.</li>
<li><strong>Match rate "disagreements" aren't real.</strong> Different denominators (current vs. all employers). Both are valid for different purposes.</li>
<li><strong>12 GB of possibly unused GLEIF data.</strong> Codex found what the others missed. Could cut the database nearly in half.</li>
<li><strong>"Still broken" items are mostly improved.</strong> WHD, 990, and scoring all got significantly better ‚Äî Codex measured different pathways.</li>
<li><strong>The platform works for real organizing.</strong> Core functionality is sound. Remaining issues are about deployment readiness and data completeness ‚Äî not fundamental architecture.</li>
</ol>
</div>

</main>

<script>
// Highlight active nav item on scroll
const sections = document.querySelectorAll('h2[id]');
const navLinks = document.querySelectorAll('.sidebar nav a');

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      navLinks.forEach(link => link.classList.remove('active'));
      const id = entry.target.getAttribute('id');
      const activeLink = document.querySelector(`.sidebar nav a[href="#${id}"]`);
      if (activeLink) activeLink.classList.add('active');
    }
  });
}, { rootMargin: '-20% 0px -70% 0px' });

sections.forEach(section => observer.observe(section));

// Close sidebar on mobile when link clicked
navLinks.forEach(link => {
  link.addEventListener('click', () => {
    if (window.innerWidth <= 768) {
      document.querySelector('.sidebar').classList.remove('open');
    }
  });
});
</script>

</body>
</html>
